group 'at.jit'
version '1.0'

apply plugin: 'java'
apply plugin: 'application'

sourceCompatibility = 1.8
mainClassName = 'at.jit.logging.LogMe'

repositories {
    mavenCentral()
}

buildscript {
    ext {
        logbackVersion = '1.2.3';
    }
}

dependencies {
    compile "org.slf4j:slf4j-api:1.7.25",
            "ch.qos.logback:logback-core:${logbackVersion}",
            "ch.qos.logback:logback-classic:${logbackVersion}",
            "ch.qos.logback:logback-access:${logbackVersion}",
            "com.fasterxml.jackson.core:jackson-core:2.9.7",
            //'biz.paluch.logging:logstash-gelf:1.12.1',
            'de.siegmar:logback-gelf:1.1.0',
            "net.logstash.logback:logstash-logback-encoder:5.2",
            'org.komamitsu:fluency:1.8.1'
}

// Build a fat JAR and automatically run the main class in LogMe
jar {
    from {
        configurations.compile.collect { it.isDirectory() ? it : zipTree(it) }
    }
    manifest {
        attributes(
            'Class-Path': configurations.compile.collect { it.getName() }.join(' '),
            'Main-Class': mainClassName
        )
    }
}